<form [formGroup]="formGroup" class="h-xl flex-row align-center flex-between pl-12 pr-12 secondary border-bottom">
  <div class="flex-row align-center">
    <button (click)="send()"
            class="live-button active"
            [class.disabled]="streamSending">Send
    </button>
    <input type="number" fxFlex="44px" class="mina-input border-rad-4 mr-8 ml-8 text-center" formControlName="batch">
    <div>transactions with </div>
    <input type="number" fxFlex="60px" class="mina-input border-rad-4 mr-8 ml-8 text-center" formControlName="fee">
    <div>MINA fee from </div>

    <div class="button-group flex-row align-center ml-5 mr-16">
      <button class="flex-row align-center pl-12 pr-12 lh-md"
              [ngClass]="randomWallet ? 'btn-selected' : 'btn-primary'"
              (click)="!randomWallet ? toggleRandomWallet() : null">Random Senders
      </button>
      <button class="flex-row align-center pl-12 pr-12 lh-md"
              [ngClass]="!randomWallet ? 'btn-selected' : 'btn-primary'"
              (click)="randomWallet ? toggleRandomWallet() : null">Specific Sender
      </button>
    </div>
    <button class="btn-selected h-sm flex-row flex-between align-center mr-5"
            *ngIf="!randomWallet"
            #dropdownTrigger
            (click)="openDropdown($event)">
      <div class="flex-row align-center">
        <span class="mina-icon f-20 mr-5">account_balance_wallet</span>
        <span *ngIf="!activeWallet" class="selected-secondary">Loading wallet..</span>
      </div>
      <div class="flex-row align-center">
        <span class="selected-secondary monospace">{{ activeWallet?.publicKey | truncateMid }}</span>
        <span class="mina-icon">arrow_drop_down</span>
      </div>
    </button>


  </div>
  <div class="tertiary">Sent Tx. overview: {{ successSentTransactions }} success, {{ failSentTransactions }} failed</div>
</form>


<ng-template #walletDropdown>
  <div class="dropdown border-rad-4 popup-box-shadow-weak flex-column border bg-surface overflow-hidden"
       (clickOutside)="detachOverlay()">
    <div class="overflow-auto h-100 p-10">
      <div *ngFor="let wallet of wallets"
           class="dropdown-item flex-row flex-between align-center pointer pl-8 pr-8 border-rad-4 mb-5"
           [class.active]="activeWallet.publicKey === wallet.publicKey"
           (click)="changeWallet(wallet)">
        <span class="mina-icon f-20">check_small</span>
        <span>{{ wallet.minaTokens | number: '1.0-3' }} MINA</span>
        <span class="monospace text-right">{{ wallet.publicKey | truncateMid }}</span>
      </div>
    </div>
  </div>
</ng-template>
